(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Uploader_page"],{"0cb2":function(e,t,n){var a=n("7b0b"),i=Math.floor,r="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,l,u,c){var f=n+e.length,m=l.length,h=s;return void 0!==u&&(u=a(u),h=o),r.call(c,h,(function(a,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(f);case"<":o=u[r.slice(1,-1)];break;default:var s=+r;if(0===s)return a;if(s>m){var c=i(s/10);return 0===c?a:c<=m?void 0===l[c-1]?r.charAt(1):l[c-1]+r.charAt(1):a}o=l[s-1]}return void 0===o?"":o}))}},"14c3":function(e,t,n){var a=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},5319:function(e,t,n){"use strict";var a=n("d784"),i=n("825a"),r=n("50c4"),o=n("a691"),s=n("1d80"),l=n("8aa5"),u=n("0cb2"),c=n("14c3"),f=Math.max,m=Math.min,h=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n,a){var d=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=a.REPLACE_KEEPS_$0,g=d?"$":"$0";return[function(n,a){var i=s(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i,a):t.call(String(i),n,a)},function(e,a){if(!d&&p||"string"===typeof a&&-1===a.indexOf(g)){var s=n(t,e,this,a);if(s.done)return s.value}var v=i(e),x=String(this),_="function"===typeof a;_||(a=String(a));var b=v.global;if(b){var I=v.unicode;v.lastIndex=0}var C=[];while(1){var E=c(v,x);if(null===E)break;if(C.push(E),!b)break;var w=String(E[0]);""===w&&(v.lastIndex=l(x,r(v.lastIndex),I))}for(var z="",F=0,S=0;S<C.length;S++){E=C[S];for(var U=String(E[0]),R=f(m(o(E.index),x.length),0),$=[],y=1;y<E.length;y++)$.push(h(E[y]));var T=E.groups;if(_){var D=[U].concat($,R,x);void 0!==T&&D.push(T);var N=String(a.apply(void 0,D))}else N=u(U,x,R,$,T,a);R>=F&&(z+=x.slice(F,R)+N,F=R+U.length)}return z+x.slice(F)}]}))},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),i=n("9f7f"),r=RegExp.prototype.exec,o=String.prototype.replace,s=r,l=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],f=l||c||u;f&&(s=function(e){var t,n,i,s,f=this,m=u&&f.sticky,h=a.call(f),d=f.source,p=0,g=e;return m&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),g=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(d="(?: "+d+")",g=" "+g,p++),n=new RegExp("^(?:"+d+")",h)),c&&(n=new RegExp("^"+d+"$(?!\\s)",h)),l&&(t=f.lastIndex),i=r.call(m?n:f,g),m?i?(i.input=i.input.slice(p),i[0]=i[0].slice(p),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:l&&i&&(f.lastIndex=f.global?i.index+i[0].length:t),c&&i&&i.length>1&&o.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),e.exports=s},"9f7f":function(e,t,n){"use strict";var a=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var a=n("23e7"),i=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},cdf3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("Navbar",{attrs:{potere:e.ruolo,nomePrimaLista:"Lista consumer",nomeSecondaLista:"File di un consumer"},on:{mostraSezione:e.showSezione,ruoloForm:e.modificaRuoloForm}},[e._v("Uploader page")]),n("section",{directives:[{name:"show",rawName:"v-show",value:""===e.sezione,expression:"sezione === ''"}]},[e._m(0),n("Table",{attrs:{items:e.consumers,fields:e.fieldsListConsumers,caricamentoDati:e.caricamentoDati},on:{mostraFiles:e.showFiles}})],1),n("section",{directives:[{name:"show",rawName:"v-show",value:"secondaLista"===e.sezione,expression:"sezione === 'secondaLista'"}]},[n("header",[n("h3",[e._v("Lista Files di "+e._s(e.consumerScelto))])]),n("Table",{attrs:{items:e.filesConsumer,fields:e.fieldsListFileConsumer,caricamentoDati:e.caricamentoDati}})],1),n("Registration",{directives:[{name:"show",rawName:"v-show",value:"registration"===e.sezione,expression:"sezione === 'registration'"}],attrs:{potere:e.ruolo,role:"consumer"},on:{registrazione_utente:e.registrazione_utente_home,registrazione:e.showMsg}}),n("ModInfo",{directives:[{name:"show",rawName:"v-show",value:"modInfo"===e.sezione,expression:"sezione === 'modInfo'"}],attrs:{potere:e.ruolo,role:e.ruoloForm},on:{modInfo_utente:e.modInfo_utente_home,modInfo:e.showMsg}}),n("Upload",{directives:[{name:"show",rawName:"v-show",value:"upload"===e.sezione,expression:"sezione === 'upload'"}],on:{upload_consumer:e.upload_consumer_home,upload_file:e.upload_file_home,upload:e.showMsg}}),n("Delete",{directives:[{name:"show",rawName:"v-show",value:"delete"===e.sezione,expression:"sezione === 'delete'"}],attrs:{potere:e.ruolo,attoriOptions:e.attoriOptions,fileOptions:e.fileOptions},on:{delete_file:e.delete_file_home,delete_username:e.delete_username_home,delete:e.showMsg}}),n("Messages",{attrs:{msg_success:e.msg_success,msg_error:e.msg_error,msg_warning:e.msg_warning}})],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h3",[e._v("Lista Consumer")])])}],r=(n("159b"),n("4de4"),n("b0c0"),n("c740"),n("d3b7"),n("25f0"),n("a37d")),o=n("137e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e._m(0),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.upload(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[n("FileInput",{attrs:{file:e.file,nameFile:e.nameFile,hashtag:e.hashtag,extension:e.extension},on:{"update:file":function(t){e.file=t},"update:nameFile":function(t){e.nameFile=t},"update:name-file":function(t){e.nameFile=t},"update:hashtag":function(t){e.hashtag=t},"update:extension":function(t){e.extension=t}}}),n("b-container",{attrs:{fluid:""}},[n("b-form-group",{attrs:{id:"usernameCons-group",label:"Username consumer:","label-for":"usernameCons"}},[n("b-form-input",{attrs:{id:"usernameCons",type:"text",name:"usernameCons",maxlength:"100",placeholder:"username consumer"},model:{value:e.usernameCons,callback:function(t){e.usernameCons=t},expression:"usernameCons"}})],1)],1),n("UserInfo",{attrs:{required:!1,name:e.nameCons,email:e.emailCons},on:{"update:name":function(t){e.nameCons=t},"update:email":function(t){e.emailCons=t}}}),n("b-button",{attrs:{type:"submit",variant:"success"}},[e._v("Upload")]),n("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1),n("Spinner",{attrs:{attesa:e.attesa}})],1)},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h3",[e._v("Caricamento file")])])}],u=n("6067"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-form-group",{attrs:{id:"fileInput-group",label:"File:","label-for":"fileInput"}},[n("b-form-file",{attrs:{id:"fileInput",type:"file",name:"fileInput",placeholder:"Scegli un file o trascinalo qui...",required:""},nativeOn:{change:function(t){return e.trasf64(t)}},model:{value:e.fileInput,callback:function(t){e.fileInput=t},expression:"fileInput"}})],1),n("b-form-group",{attrs:{id:"nameFileInput-group",label:"Nome del file:","label-for":"nameFileInput"}},[n("b-form-input",{attrs:{id:"nameFileInput",type:"text",name:"nameFileInput",maxlength:"100",placeholder:"name of file",required:""},model:{value:e.nameFileInput,callback:function(t){e.nameFileInput=t},expression:"nameFileInput"}}),n("b-form-text",[e._v(" Non serve specificare l'estensione del file. ")])],1),n("b-form-group",{attrs:{id:"hashtagInput-group",label:"Hashtag:","label-for":"hashtagInput"}},[n("b-form-input",{attrs:{id:"hashtagInput",type:"text",name:"hashtagInput",maxlength:"100",placeholder:"some hashtag"},model:{value:e.hashtagInput,callback:function(t){e.hashtagInput=t},expression:"hashtagInput"}})],1)],1)},f=[],m=(n("5319"),n("ac1f"),{name:"FileInput",props:["file","nameFile","hashtag","extension"],data:function(){return{fileInput:null}},watch:{fileStringInput:function(){""===this.fileStringInput&&(this.fileInput=null)}},computed:{fileStringInput:{get:function(){return this.file},set:function(e){this.$emit("update:file",e)}},nameFileInput:{get:function(){return this.nameFile},set:function(e){this.$emit("update:nameFile",e)}},hashtagInput:{get:function(){return this.hashtag},set:function(e){this.$emit("update:hashtag",e)}}},methods:{trasf64:function(e){var t=this,n=new FileReader;n.onload=function(e){t.fileStringInput=e.target.result.replace(/^data:.+;base64,/,"")},n.onerror=function(e){console.log("Error: ",e)},n.readAsDataURL(e.target.files[0]);var a=e.target.files[0].name,i=a.lastIndexOf(".");this.$emit("update:extension",a.substring(i))}}}),h=m,d=n("2877"),p=Object(d["a"])(h,c,f,!1,null,null,null),g=p.exports,v=n("66e6"),x=n("62c3"),_=n.n(x);null!=localStorage.getItem("jwtToken")&&(_.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken")));var b={name:"Upload",components:{FileInput:g,UserInfo:v["a"],Spinner:u["a"]},data:function(){return{file:"",nameFile:"",hashtag:"",extension:"",usernameCons:"",nameCons:"",emailCons:"",attesa:!1}},methods:{reset:function(){this.file="",this.extension="",this.nameFile="",this.hashtag="",this.usernameCons="",this.nameCons="",this.emailCons=""},upload:function(){var e=this;this.attesa=!0,_.a.post("".concat("/api","/files/upload"),{file:this.file,nameFile:this.nameFile+this.extension,hashtag:this.hashtag,usernameCons:this.usernameCons,nameCons:this.nameCons,emailCons:this.emailCons}).then((function(t){var n={username:e.usernameCons,name:e.nameCons,email:e.emailCons,logo:""};e.$emit("upload_consumer",n),e.$emit("upload_file",t.data),e.$emit("upload","Upload file completato ("+e.nameFile+")"),e.reset()})).catch((function(t){e.$emit("upload",t.response.data)})).finally((function(){e.attesa=!1}))}}},I=b,C=Object(d["a"])(I,s,l,!1,null,null,null),E=C.exports,w=n("be26"),z=n("afcd"),F=n("a11b"),S=n("fb85"),U=n("fa7d");_.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var R={name:"Uploader_page",components:{Navbar:r["a"],Table:o["a"],Upload:E,Registration:w["a"],ModInfo:z["a"],Delete:F["a"],Messages:S["a"]},mixins:[U["b"],U["c"]],data:function(){return{ruolo:"uploader",ruoloForm:"",consumerScelto:null,consumers:[],filesUploader:[],filesConsumer:[],fieldsListConsumers:["name","files","details"],fieldsListFileConsumer:["id","name",{key:"dataCaricamento",sortable:!0},{key:"dataVisualizzazione",sortable:!0},"indirizzoIP","hashtag"],caricamentoDati:!1}},computed:{attoriOptions:function(){var e=[];return this.consumers.forEach((function(t){e.push(t.username)})),e},fileOptions:function(){var e=[];return this.filesUploader.forEach((function(t){e.push(t.id)})),e}},methods:{modificaRuoloForm:function(e){this.ruoloForm=e},showFiles:function(e){this.consumerScelto=e,this.filesConsumer=null,this.filesConsumer=this.filesUploader.filter((function(t){return t.usernameCons===e})),this.sezione="secondaLista"},registrazione_utente_home:function(e){var t=e.username,n=e.name,a=e.email,i=e.logo,r={username:t,name:n,email:a,logo:i};this.consumers.push(r)},modInfo_utente_home:function(e){var t=e.utente,n=e.role;"consumer"===n&&(this.consumers=this.consumers.filter((function(e){return e.username!==t.username})),this.consumers.push(t))},upload_consumer_home:function(e){var t=e.username;-1===this.consumers.findIndex((function(e){return e.username===t}))&&this.consumers.push(e)},upload_file_home:function(e){this.filesUploader.push(e),e.usernameCons===this.consumerScelto&&this.filesConsumer.push(e),this.ordinamentoFile()},delete_file_home:function(e){this.filesUploader=this.filesUploader.filter((function(t){return t.id!==e})),this.filesConsumer=this.filesConsumer.filter((function(t){return t.id!==e}))},delete_username_home:function(e){this.consumers=this.consumers.filter((function(t){return t.username!==e})),this.filesUploader=this.filesUploader.filter((function(t){return t.usernameCons!==e})),e===this.consumerScelto&&(this.consumerScelto="",this.filesConsumer=[])},ordinamentoFile:function(){var e=this;this.filesUploader.sort((function(e,t){if(""===e.dataVisualizzazione^""===t.dataVisualizzazione){if(e.dataVisualizzazione<t.dataVisualizzazione)return-1;if(e.dataVisualizzazione>t.dataVisualizzazione)return 1}return e.dataCaricamento<t.dataCaricamento?1:e.dataCaricamento>t.dataCaricamento?-1:0})),this.filesConsumer=this.filesUploader.filter((function(t){return t.usernameCons===e.consumerScelto}))}},created:function(){var e=this;this.caricamentoDati=!0,_.a.get("".concat("/api","/list/consumers")).then((function(t){return e.consumers=t.data})).catch((function(t){return e.showMsg(t.toString())})),_.a.get("".concat("/api","/list/filesUploader")).then((function(t){return e.filesUploader=t.data})).catch((function(t){return e.showMsg(t.toString())})).finally((function(){e.caricamentoDati=!1}))}},$=R,y=Object(d["a"])($,a,i,!1,null,null,null);t["default"]=y.exports},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),i=n("d039"),r=n("b622"),o=n("9263"),s=n("9112"),l=r("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),f=r("replace"),m=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var d=r(e),p=!i((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),g=p&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!p||!g||"replace"===e&&(!u||!c||m)||"split"===e&&!h){var v=/./[d],x=n(d,""[e],(function(e,t,n,a,i){return t.exec===o?p&&!i?{done:!0,value:v.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),_=x[0],b=x[1];a(String.prototype,e,_),a(RegExp.prototype,d,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}f&&s(RegExp.prototype[d],"sham",!0)}}}]);
//# sourceMappingURL=Uploader_page.11831931.js.map